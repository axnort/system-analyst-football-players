<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Players â€” {{ club|replace('-', ' ')|title }}</title>
<link rel="stylesheet" href="{{ url_for('static', filename='css/players.css') }}">
</head>
<body>
{% set gender_selected = gender_selected or request.args.get('gender','putra') %}

<!-- ===== NAVBAR ===== -->
<nav class="navbar">
<div class="nav-container">
  <div class="logo">
    <img src="{{ url_for('static', filename='aset/Logo.jpg') }}" alt="Logo"/>
    <span>Superstar Fest</span>
  </div>

  <button class="hamburger" aria-label="Toggle menu" aria-expanded="false" aria-controls="main-menu">â˜°</button>

  <ul id="main-menu" class="nav-menu">
      <li><a href="{{ url_for('urls.home') }}" class="{{ 'active' if request.path == url_for('urls.home') else '' }}">Home</a></li>
    <li>
      <a href="{{ url_for('urls.clubs', gender=gender_selected) }}"
        class="{% if request.path.startswith('/clubs')
                or request.path.startswith('/players')
                or request.path.startswith('/auth_club')
                or request.path.startswith('/auth_pin') %}active{% endif %}">
        Performance Player
      </a>
    </li>
    <li><a href="{{ url_for('urls.pin_admin', gender=gender_selected) }}" class="{{ 'active' if request.path.startswith('/pin_admin') else '' }}">Compare Player</a></li>
  </ul>
</div>
</nav>

<!-- ===== MAIN CONTENT ===== -->
<main class="main">
{% set q = request.args.get('q','') %}
{% set club_display = (datas.players[0].Club if datas.players and datas.players[0].Club else (club|replace('-',' ')|title)) %}

<!-- Header Bar (Back + Title) -->
<div class="header-bar">
  <a class="back-btn" href="{{ url_for('urls.clubs', ku=ku_selected, gender=gender_selected) }}"><span class="chev">â€¹</span> Back</a>
</div>

<!-- Title di tengah -->
<h1 class="title">{{ club_display }}</h1>

<!-- Search Section -->
<form class="search-form" action="" method="get" id="players-search-form" role="search">
  <input type="hidden" name="ku" value="{{ ku_selected }}">
  <input type="hidden" name="gender" value="{{ gender_selected }}">
  <div class="search-pill">
    <input type="text" id="search" name="q" placeholder="Cari pemain di klub ini..."
          value="{{ q }}" inputmode="search" autocomplete="off">
    <button class="search-icon-btn" type="submit" aria-label="Cari">ğŸ”</button>
  </div>
</form>

<!-- Player Grid -->
<div class="players-container">
  {% set ql = (q or '')|lower %}
  {% set shown = 0 %}
  {% for player in datas.players %}
    {% set name_l = (player.Name or '')|lower %}
    {% if ql == '' or (ql in name_l) %}
      {% set shown = shown + 1 %}
      <div class="player-card">
        <div class="player-photo">
          <img src="{{ player.Photo }}" alt="{{ player.Name }}"
                onerror="this.onerror=null;this.src='{{ url_for('static', filename='Images/avatar-default.png') }}'" />
        </div>
        <h3 class="player-name">{{ player.Name }}</h3>
        <p><strong>Club:</strong> {{ player.Club }}</p>
        <p class="muted">Kategori: {{ player.Category }}</p>
        <div class="stats">
          <span>Goals: {{ player.Goals }}</span>
          <span>Assists: {{ player.Assists }}</span>
          <span>Matches: {{ player.Matches }}</span>
        </div>
        <a href="{{ url_for('urls.get', name=player.Name, gender=gender_selected) }}" class="detail-btn">See Detail</a>
      </div>
    {% endif %}
  {% endfor %}
</div>

{% if shown == 0 %}
  <p class="empty-state">Belum ada pemain{% if q %} untuk kata kunci â€œ{{ q }}â€{% endif %}.</p>
{% endif %}
</main>

<script src="{{ url_for('static', filename='js/navbar.js') }}"></script>
</body>
</html>
