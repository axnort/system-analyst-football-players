<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Performance Player</title>

<link rel="stylesheet" href="{{ url_for('static', filename='css/clubs.css') }}">
</head>
<body>
<!-- Navbar -->
<nav class="navbar">
<div class="nav-container">
<div class="logo">
    <img src="{{ url_for('static', filename='aset/Logo.jpg') }}" alt="Logo"/>
    <span>Superstar Fest</span>
</div>

<button class="hamburger" aria-label="Toggle menu" aria-expanded="false" aria-controls="main-menu">‚ò∞</button>

<ul id="main-menu" class="nav-menu">
<li><a href="{{ url_for('urls.home') }}" class="{{ 'active' if request.path == url_for('urls.home') else '' }}">Home</a></li>
<li><a href="{{ url_for('urls.clubs') }}" class="{{ 'active' if request.path.startswith('/clubs') else '' }}">Performance Player</a></li>
<li><a href="{{ url_for('urls.pin_admin') }}" class="{{ 'active' if request.path.startswith('/pin_admin') else '' }}">Compare Player</a></li>
</ul>
</div>
</nav>

<main class="main">
<!-- Back -->
<div class="toolbar">
<a class="back-btn" href="javascript:history.back()"><span class="chev">‚Äπ</span> Back</a>
</div>

<!-- Title -->
<h1 class="title">Performance Player</h1>

{% set q = request.args.get('q','') %}
{% set ku_selected = request.args.get('ku','KU8') %}
{% set gender_selected = gender_selected or request.args.get('gender','putra') %}

<!-- Search + KU (compact pill) -->
<form class="search-row" action="/clubs" method="get" id="club-search-form" role="search">
<div class="search-pill" data-search-box>
    <input type="text" id="search" name="q" placeholder="Cari nama klub..." value="{{ q }}" autocomplete="off" inputmode="search" />
    <button class="search-icon-btn" type="submit" aria-label="Cari">üîç</button>

    <!-- Optional: container suggestion (isi via JS kalau pakai autocomplete) -->
    <div id="search-suggest" class="suggest hidden" aria-live="polite"></div>
</div>

<!-- Dropdown KU -->
<div class="ku-wrapper">
    <label for="ku" class="ku-label">KU</label>
    <div class="ku-select-box">
    <select id="ku" name="ku" class="ku-select">
        <option value="KU8"  {% if ku_selected=='KU8' %}selected{% endif %}>KU 8</option>
        <option value="KU12" {% if ku_selected=='KU12' %}selected{% endif %}>KU 12</option>
    </select>
    </div>
</div>

<div class="ku-wrapper">
    <label for="gender" class="ku-label">Gender</label>
    <div class="ku-select-box">
    <select id="gender" name="gender" class="ku-select">
        <option value="putra" {% if gender_selected=='putra' %}selected{% endif %}>Putra</option>
        <option value="putri" {% if gender_selected=='putri' %}selected{% endif %}>Putri</option>
    </select>
    </div>
</div>
</form>

<!-- Clubs Grid -->
<section class="club-grid">
{% set ql = (q or '')|lower %}
{% set clubs_sorted = datas.clubs|sort(attribute='Name') %}
{% for c in clubs_sorted %}
    {% set pass_q = (ql|length == 0) or (ql in (c.Name|lower)) %}
    {% set pass_ku = (ku_selected == 'ALL') or (c.Category == ku_selected) %}
    {% if pass_q and pass_ku %}
    {% set safe_slug = c.slug if c.slug else (c.Name|replace(' ','-')|lower) %}
    <a class="club-card"
        href="/auth_club/{{ safe_slug }}?ku={{ ku_selected }}&gender={{ gender_selected }}"
        data-slug="{{ safe_slug }}" data-ku="{{ ku_selected }}">
        <img class="club-logo"
            src="{{ c.Logo or url_for('static', filename='Images/Logo.jpg') }}"
            alt="{{ c.Name }}">
        <div class="club-meta">
        <h3 class="club-name">{{ c.Name }}</h3>
        <p class="club-sub">Kategori {{ c.Category }}</p>
        </div>
        <span class="club-chevron">‚Ä∫</span>
    </a>
    {% endif %}
{% endfor %}
</section>
</main>

<script src="{{ url_for('static', filename='js/clubs.js') }}"></script>
</body>
</html>
